/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/@creativebulma/bulma-tagsinput@1.0.3/src/js/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
class t{constructor(t=[]){this._listeners=new Map(t),this._events=new Map}destroy(){this._listeners={},this.events=[]}listenerCount(t){return this._listeners.has(t)?this._listeners.get(t).length:0}on(t,e){this._addListener(t,e,!1)}once(t,e){this._addListener(t,e,!0)}off(t){this._removeListeners(t)}emit(t,...e){return this._applyEvents(t,e)}_addListener(t,e,i=!1){if(Array.isArray(t))t.forEach((t=>this._addListener(t,e,i)));else{const s=(t=t.toString()).split(/,|, | /);s.length>1?s.forEach((t=>this._addListener(t,e,i))):(Array.isArray(this._listeners.get(t))||this._listeners.set(t,[]),this._listeners.get(t).push({once:i,fn:e}))}}_removeListeners(t=null){if(null!==t)if(Array.isArray(t))name.forEach((t=>this.removeListeners(t)));else{const e=(t=t.toString()).split(/,|, | /);e.length>1?e.forEach((t=>this.removeListeners(t))):this._listeners.delete(t)}else this._listeners=new Map}_applyEvents(t,e){let i=e;if(this._listeners.has(t)){const s=this._listeners.get(t);let n=[];return s.forEach(((t,s)=>{(i=t.fn.apply(null,e))&&t.once&&n.unshift(s)})),n.forEach((t=>{s.splice(t,1)})),i}return i[0]}}const e=t=>"function"==typeof t,i=t=>"string"==typeof t||!!t&&"object"==typeof t&&"[object String]"===Object.prototype.toString.call(t),s=t=>("function"==typeof t||"object"==typeof t&&!!t)&&!Array.isArray(t),n=t=>{try{return Node.prototype.cloneNode.call(t,!1),!0}catch(t){return!1}},o=function(t){return!/^(?:f(?:alse)?|no?|0+)$/i.test(t)&&!!t},r=(t,e={})=>n(t)&&t.dataset?Object.keys(t.dataset).filter((t=>Object.keys(e).includes(t))).reduce(((e,i)=>({...e,[i]:t.dataset[i]})),{}):{},h=t=>i(t)?t.replace(/(['"<>])/g,(t=>({"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[t]))):t;class l extends t{constructor(t,s={},o={}){var h,l;if(super(),this.element=(h=t,l=document,e(h)?h(l):n(h)?h:i(h)?(l&&n(l)&&1===l.nodeType||(l=document),l.querySelector(h)):Array.isArray(h)||"undefined"!=typeof NodeList&&NodeList.prototype.isPrototypeOf(h)?h[0]:void 0),!this.element)throw new Error(`An invalid selector or non-DOM node has been provided for ${this.constructor.name}.`);this.element[this.constructor.name]=this.constructor._interface.bind(this),this.element[this.constructor.name].Constructor=this.constructor.name,this.id=((t="")=>t+([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))))(this.constructor.name+"-"),this.options={...o,...s,...r(this.element,o)}}static attach(t=null,s={},o=null){let r=new Array;return null!==t&&(((t,s)=>e(t)?t(s):n(t)?[t]:i(t)?(s&&n(s)&&1===s.nodeType||(s=document),s.querySelectorAll(t)):"undefined"!=typeof NodeList&&NodeList.prototype.isPrototypeOf(t)?t:[])(t,o).forEach((e=>{void 0===e[this.name]?r.push(new this(e,{selector:t,...s})):r.push(e[this.name])})),void 0===window[this.name]&&(window[this.name]={observers:[]}),window[this.name].observers&&!window[this.name].observers.includes(t)&&(this.observeDom(t,s),window[this.name].observers.push(t))),r}static observeDom(t,e){const i=new MutationObserver((i=>{i.forEach((i=>{for(let s=0;s<i.addedNodes.length;s++)void 0!==window[this.name]&&this.attach(t,e,i.addedNodes[s])}))}));"undefined"!=typeof document&&i.observe(document,{childList:!0,subtree:!0})}static _interface(t=null,e={}){if("string"==typeof t){if(void 0===this[t])throw new TypeError(`No method named "${t}"`);return this[t](e)}return this}}const a={allowDuplicates:!1,caseSensitive:!0,clearSelectionOnTyping:!1,closeDropdownOnItemSelect:!0,delimiter:",",freeInput:!0,highlightDuplicate:!0,highlightMatchesString:!0,itemValue:void 0,itemText:void 0,maxTags:void 0,maxChars:void 0,minChars:1,noResultsLabel:"No results found",placeholder:"",removable:!0,searchMinChars:1,searchOn:"text",selectable:!0,source:void 0,tagClass:"is-rounded",trim:!0};class c extends l{constructor(t,e={}){super(t,e,a),this.options.allowDuplicates=o(this.options.allowDuplicates),this.options.caseSensitive=o(this.options.caseSensitive),this.options.clearSelectionOnTyping=o(this.options.clearSelectionOnTyping),this.options.closeDropdownOnItemSelect=o(this.options.closeDropdownOnItemSelect),this.options.freeInput=o(this.options.freeInput),this.options.highlightDuplicate=o(this.options.highlightDuplicate),this.options.highlightMatchesString=o(this.options.highlightMatchesString),this.options.removable=o(this.options.removable),this.options.searchOn=this.options.searchOn.toLowerCase(),this.options.selectable=o(this.options.selectable),this.options.trim=o(this.options.trim),this._onDocumentClick=this._onDocumentClick.bind(this),this._onInputChange=this._onInputChange.bind(this),this._onInputClick=this._onInputClick.bind(this),this._onInputFocusOut=this._onInputFocusOut.bind(this),this._onInputFocusIn=this._onInputFocusIn.bind(this),this._onInputKeyDown=this._onInputKeyDown.bind(this),this._onInputKeyPress=this._onInputKeyPress.bind(this),this._onOriginalInputChange=this._onOriginalInputChange.bind(this),this._onTagDeleteClick=this._onTagDeleteClick.bind(this),this._onTagClick=this._onTagClick.bind(this),this._onDropdownItemClick=this._onDropdownItemClick.bind(this),this.items=[],this._selected=-1,this._init()}static attach(t='input[data-type="tags"], input[type="tags"], select[data-type="tags"], select[type="tags"]',e={},i=null){return super.attach(t,e,i)}_init(){var t;this._isSelect="SELECT"===this.element.tagName,this._isMultiple=this._isSelect&&this.element.hasAttribute("multiple"),this._objectItems=void 0!==this.options.itemValue||this._isSelect,this.options.itemValue=this.options.itemValue?this.options.itemValue:this._isSelect?"value":void 0,this.options.itemText=this.options.itemText?this.options.itemText:this._isSelect?"text":void 0,void 0===this.options.itemText&&(this.options.itemText=this.options.itemValue),this.options.freeInput=!this._objectItems&&this.options.freeInput,this.source=null,void 0!==this.options.source&&(["value","text"].includes(this.options.searchOn)||(this.options.searchOn=a.searchOn),t=this.options.source,Boolean(t&&"function"==typeof t.then)?this.source=this.options.source:e(this.options.source)?this.source=t=>Promise.resolve(this.options.source(t)):Array.isArray(this.options.source)&&(this.source=t=>Promise.resolve(this.options.source.filter((e=>{const i=this._objectItems?e[this.options.itemValue]:e;return this.options.caseSensitive?i.includes(t):i.toLowerCase().includes(t.toLowerCase())}))))),this._manualInputAllowed=!this._isSelect&&this.options.freeInput,this._filterInputAllowed=this._isSelect||this.source,this._build()}_build(){const t=document.createRange().createContextualFragment((e={emptyTitle:void 0!==this.options.noResultsLabel?this.options.noResultsLabel:"No results found",placeholder:this.element.placeholder?this.element.placeholder:this.options.placeholder,uuid:this.id},`<div class="tags-input">\n        <input class="input" type="text" placeholder="${h(e.placeholder)}">\n        <div id="${h(e.uuid)}-list" class="dropdown-menu" role="menu">\n            <div class="dropdown-content">\n                <span class="dropdown-item empty-title">${h(e.emptyTitle)}</span>\n            </div>\n        </div>\n    </div>`));var e;this.container=t.firstElementChild,this.input=this.container.querySelector("input"),this.dropdown=this.container.querySelector(`#${this.id}-list .dropdown-content`),this.dropdownEmptyOption=this.dropdown.querySelector(".empty-title"),((t,e,i=null)=>{null!==i&&(i=i.split(" ")),[...e.attributes].forEach((e=>{i.includes(e.nodeName)||t.setAttribute("id"===e.nodeName?"data-id":e.nodeName,e.nodeValue)}))})(this.input,this.element,"data-type multiple name type value"),this.element.disabled&&(this.container.setAttribute("disabled","disabled"),this.options.removable=!1,this.options.selectable=!1),(this.input.getAttribute("disabled")||this.input.classList.contains("is-disabled"))&&this.container.setAttribute("disabled","disabled"),this._manualInputAllowed||this.container.classList.add(this._filterInputAllowed?"is-filter":"no-input"),this._isSelect||void 0!==this.options.source||(this.dropdown.remove(),this.dropdown=null,this.input.setAttribute("list",null)),this._isSelect?Array.from(this.element.options).forEach((t=>{t.selected&&this.add(t.value?t:{value:t.text,text:t.text},!0),this._createDropdownItem(t)})):this.element.value.length&&this.add(this._objectItems?JSON.parse(this.element.value):this.element.value,!0),this._bindEvents(),this.element.parentNode.insertBefore(this.container,this.element),this.element.style.display="none"}_bindEvents(){document.addEventListener("click",this._onDocumentClick),this.element.addEventListener("change",this._onOriginalInputChange),this.input.addEventListener("input",this._onInputChange),this.input.addEventListener("click",this._onInputClick),this.input.addEventListener("keydown",this._onInputKeyDown),this.input.addEventListener("keypress",this._onInputKeyPress),this.input.addEventListener("focusout",this._onInputFocusOut),this.input.addEventListener("focusin",this._onInputFocusIn)}_caretAtStart(){try{return 0===this.input.selectionStart&&0===this.input.selectionEnd}catch(t){return""===this.input.value}}_checkLength(t){const e=this._objectItems?t[this.options.itemValue]:t;return!i(e)||e.length>=this.options.minChars&&(void 0===this.options.maxChars||e.length<=this.options.maxChars)}_closeDropdown(){this.dropdown&&(this.emit("before.dropdown.close",this),this.container.classList.remove("is-active"),this.emit("after.dropdown.close",this))}_createDropdownItem(t){if(this.dropdown){const i=document.createRange().createContextualFragment((e={text:t.text,value:t.value},`<a href="javascript:void(0);" class="dropdown-item" data-value="${h(e.value)}" data-text="${h(e.text)}">${h(e.text)}</a>`)).firstElementChild;i.dataset.value=t.value,i.dataset.text=t.text,i.addEventListener("click",this._onDropdownItemClick),this.dropdown.append(i)}var e}_createTag(t){var e;const i=document.createRange().createContextualFragment((e={removable:this.options.removable,style:this.options.tagClass,text:t.text,value:t.value},`<span class="tag ${h(e.style)}" data-value="${h(e.value)}">\n        ${h(e.text)}\n        ${e.removable?'<div class="delete is-small" data-tag="delete"></div>':""}\n    </span>`)).firstElementChild;if(i.addEventListener("click",this._onTagClick),this.options.removable){const t=i.querySelector(".delete");t&&t.addEventListener("click",this._onTagDeleteClick)}this.container.insertBefore(i,this.input)}_emptyDropdown(){this.dropdown&&Array.from(this.dropdown.children).filter((t=>!t.classList.contains("empty-title"))).forEach((t=>{t.remove()}))}_highlightMatchesInString(t,e){const i=new RegExp("("+e+")(?![^<]*>|[^<>]*</)","i");if(!t.match(i))return t;const s=t.match(i).index,n=s+t.match(i)[0].toString().length,o=t.substring(s,n);return t=t.replace(i,`<mark class="is-highlighted">${o}</mark>`)}_openDropdown(){this.dropdown&&this.container.classList.add("is-active")}_propagateChange(){this._isSelect?(Array.from(this.element.options).forEach((t=>{t.setAttribute("selected",void 0),t.selected=!1,void 0!==t.dataset.source&&t.remove()})),this.items.forEach((t=>{this._updateSelectOptions({value:this._objectItems?t[this.options.itemValue]:t,text:this._objectItems?t[this.options.itemText]:t})}))):this.element.value=this.value;const t=new CustomEvent("change",{detail:this.constructor.name});this.element.dispatchEvent(t)}_trim(t){return this.options.trim&&(this._objectItems?(i(t[this.options.itemValue])&&(t[this.options.itemValue]=t[this.options.itemValue].trim()),i(t[this.options.itemText])&&(t[this.options.itemText]=t[this.options.itemText].trim())):t=t.trim()),t}_filterDropdownItems(t=null){if(this.dropdown&&this.emit("before.dropdown.filter",this)){Array.from(this.dropdown.children).filter((t=>!t.classList.contains("empty-title"))).forEach((e=>{const i=e.dataset[this.options.searchOn];if(this.options.highlightMatchesString&&(e.textContent=e.textContent.replace(/<\/?(mark\s?(class="is\-highlighted")?)?>]*>?/gm,"")),t&&t.length?(this.options.caseSensitive?e.style.display=i.includes(t)?"block":"none":e.style.display=i.toLowerCase().includes(t.toLowerCase())?"block":"none",this.options.highlightMatchesString&&(e.innerHTML=this._highlightMatchesInString(e.innerHTML,t))):e.style.display="block",!this.options.allowDuplicates||this._isSelect&&!this._isMultiple){const t="value"===this.options.searchOn?this.hasValue(i):this.hasText(i);e.style.display=t?"none":e.style.display}}));const e=Array.from(this.dropdown.children).filter((t=>!t.classList.contains("empty-title"))).some((t=>"none"!==t.style.display));return this.dropdownEmptyOption.style.display=e?"none":"block",this.emit("after.dropdown.filter",this),e}return!0}_updateSelectOptions(t){if(this._isSelect){let e=this.element.querySelector(`option[value="${encodeURIComponent(t.value)}"]`)||this.element.querySelector(`option[value="${t.value}"]`);if(!e){e=document.createRange().createContextualFragment(`<option value="${t.value}" data-source="${this.id}" selected>${t.text}</option>`).firstElementChild,this.element.add(e)}e.setAttribute("selected","selected"),e.selected=!0}}add(t,e=!1){if(void 0!==this.options.maxTags&&this.items.length>=this.options.maxTags)return this;if(t=Array.isArray(t)?t:s(t)?[t]:t.split(this.options.delimiter),!this._objectItems&&t.filter((t=>i(t))).length!==t.length)throw"Item must be a string or an array of strings";if(this._objectItems&&t.filter((t=>s(t))).length!==t.length)throw"Item must be an object or an array of objects";return t.forEach((t=>{if(t=this._trim(t),this._checkLength(t)&&(this._isSelect&&!this._isMultiple&&this.items.length>0&&(this.removeAtIndex(0),this.element.remove(this.element.selectedIndex)),t=this.emit("before.add",t)))if(this.options.allowDuplicates||!this.has(t)){const i={value:this._objectItems?t[this.options.itemValue]:t,text:this._objectItems?t[this.options.itemText]:t},s=this._createTag(i);this.items.push(t),e||(this._propagateChange(),this.emit("after.add",{item:t,tag:s}))}else{if(this.options.highlightDuplicate){const e=Array.from(this.container.children).filter((t=>t.classList.contains("tag")))[this.indexOf(t)];e&&(e.classList.add("is-duplicate"),setTimeout((()=>{e.classList.remove("is-duplicate")}),1250))}this.emit("item.duplicate",t)}})),this}clearSelection(){if(this._selected>=0){const t=this.items[this._selected],e=Array.from(this.container.children).filter((t=>t.classList.contains("tag")))[this._selected];this.emit("before.unselect",{item:t,tag:e})&&(e&&e.classList.remove("is-selected"),this._selected=-1,this.emit("after.unselect",{item:t,tag:e}))}return this}flush(){return this.removeAll()}focus(){return this.container.classList.add("is-focused"),this.input.focus(),this}has(t){return t=this._trim(t),this._objectItems?this.items.some((e=>this.options.caseSensitive||!i(e[this.options.itemValue])?e[this.options.itemValue]===t[this.options.itemValue]:e[this.options.itemValue].toLowerCase()===t[this.options.itemValue].toLowerCase())):this.hasValue(t)}hasText(t){return this.options.trim&&(t=t.trim()),this.items.some((e=>{const i=this._objectItems?e[this.options.itemText]:e;return this.options.caseSensitive?i===t:i.toLowerCase()===t.toLowerCase()}))}hasValue(t){return this.options.trim&&(t=t.trim()),this.items.some((e=>{const i=this._objectItems?e[this.options.itemValue]:e;return this.options.caseSensitive?i===t:i.toLowerCase()===t.toLowerCase()}))}indexOf(t){if(t=this._trim(t),this._objectItems){if(!s(t))throw"Item must be an object";return this.items.map((function(t){return t.value})).indexOf(t.value)}return this.items.indexOf(t)}input(){return this.input}items(){return this.items}remove(t){if(this.options.removable){if(t=Array.isArray(t)?t:s(t)?[t]:t.split(this.options.delimiter),!this._objectItems&&t.filter((t=>i(t))).length!==t.length)throw"Item must be a string or an array of strings";if(this._objectItems&&t.filter((t=>s(t))).length!==t.length)throw"Item must be an object or an array of objects";t.forEach((t=>{let e=this.indexOf(t);for(;e>=0;)this.removeAtIndex(e),e=this.indexOf(t)}))}return this}removeAll(){return this.options.removable&&this.emit("before.flush",this.items)&&(this.clearSelection(),Array.from(this.container.children).filter((t=>t.classList.contains("tag"))).forEach((t=>t.remove())),this.items=[],this._filterDropdownItems(),this._propagateChange(),this.emit("after.flush",this.items)),this}removeAtIndex(t,e=!0){if(this.options.removable&&!isNaN(t)&&t>=0&&t<this.items.length){const i=Array.from(this.container.children).filter((t=>t.classList.contains("tag")))[t],s=this.items[t];this.emit("before.remove",s)&&(e&&this.clearSelection(),i&&i.remove(),this._isSelect&&(this.element.options[t].selected=!1),this._selected==t?this._selected=-1:this._selected>=0&&(this._selected-=1),this.items.splice(t,1),this._filterDropdownItems(),this._propagateChange(),this.emit("after.remove",s))}return this}select(t){if(this.options.selectable){if(t=Array.isArray(t)?t:s(t)?[t]:t.split(this.options.delimiter),!this._objectItems&&t.filter((t=>i(t))).length!==t.length)throw"Item must be a string or an array of strings";if(this._objectItems&&t.filter((t=>s(t))).length!==t.length)throw"Item must be an object or an array of objects";t.forEach((t=>{this.selectAtIndex(this.indexOf(t))}))}return this}selectAtIndex(t){if(this.options.selectable&&(this.clearSelection(),!isNaN(t)&&t>=0&&t<this.items.length)){const e=Array.from(this.container.children).filter((t=>t.classList.contains("tag")))[t],i=this.items[t];this.emit("before.select",{item:i,tag:e})&&(e&&e.classList.add("is-selected"),this._selected=t,this.emit("after.select",{item:i,tag:e}))}return this}get selected(){return this._selected>=0?this.items[this._selected]:null}get selectedIndex(){return this._selected}get value(){return this._isSelect?Array.from(this.element.options).filter((t=>t.selected)).map((t=>t.value)):this._objectItems?this.items.map((t=>t.value)).join(this.options.delimiter):this.items.join(this.options.delimiter)}set value(t){this.removeAll(),this.add(t)}_onDocumentClick(t){if(this.dropdown){if(this.container.contains(t.target))return;if(t.target.dataset.tag&&"delete"===t.target.dataset.tag)return;this._closeDropdown()}}_onDropdownItemClick(t){if(t.preventDefault(),this.dropdown){if(this._objectItems){let e={};e[this.options.itemText]=t.currentTarget.dataset.text,e[this.options.itemValue]=t.currentTarget.dataset.value,this.add(e)}else this.add(t.currentTarget.dataset.value);this._filterDropdownItems(),this.input.value="",this.input.focus(),this.options.closeDropdownOnItemSelect&&this._closeDropdown()}}_onInputChange(t){this._filterDropdownItems(this.input.value)}_onInputClick(t){t.preventDefault(),(!this.source||this.input.value.length>=this.options.searchMinChars)&&(this._openDropdown(),this._filterDropdownItems())}_onInputFocusIn(t){if(t.preventDefault(),null!==this.container.getAttribute("disabled")||this.container.classList.contains("is-disabled"))return this.input.blur(),!1;this.container.classList.add("is-focused")}_onInputFocusOut(t){t.preventDefault(),this.container.classList.remove("is-focused")}_onInputKeyDown(t){switch(t.charCode||t.keyCode||t.which){case 8:if(this.options.removable&&this._caretAtStart()&&this._selected>=0){const t=this._selected;t>=0&&this.selectAtIndex(t+1<this.items.length?t+1:t-1),this.removeAtIndex(t,!1)}this.source&&this.input.value.length<this.options.searchMinChars&&this._closeDropdown();break;case 27:this._selected>=0&&this.clearSelection(),this._closeDropdown();break;case 46:if(this.options.removable&&this._caretAtStart()&&this._selected>=0){const t=this._selected;t>=0&&this.selectAtIndex(t+1<this.items.length?t+1:t-1),this.removeAtIndex(t,!1)}this.source&&this.input.value.length<this.options.searchMinChars&&this._closeDropdown();break;case 37:this.input.value.length||(this._selected<0?this.selectAtIndex(this.items.length-1):this.selectAtIndex(this._selected-1>=0?this._selected-1:this.items.length-1));break;case 39:this.input.value.length||(this._selected<0?this.selectAtIndex(0):this.selectAtIndex(this._selected+1>=this.items.length?0:this._selected+1));break;default:this.options.clearSelectionOnTyping&&this.clearSelection()}}_onInputKeyPress(t){const e=t.charCode||t.keyCode||t.which;let i=this._trim(this.input.value)+String.fromCharCode(e);if(!this._manualInputAllowed&&!this._filterInputAllowed)return t.preventDefault(),!1;if(!i.length&&13!==e)return!1;if(this._filterInputAllowed&&this._filterDropdownItems(i),this._filterInputAllowed&&this.source&&i.length>=this.options.searchMinChars&&13!==e&&(this._openDropdown(),this.dropdown.classList.add("is-loading"),this._emptyDropdown(),this.source(i).then((t=>{(t=this.emit("on.results.received",t)).length&&t.forEach((t=>{let e={value:null,text:null};s(t)?(e.value=t[this.options.itemValue],e.text=t[this.options.itemText]):(e.value=t,e.text=t),this._createDropdownItem(e)})),this._filterDropdownItems(i),this.dropdown.classList.remove("is-loading")})).catch((t=>{console.log(t)}))),this._manualInputAllowed&&(i.includes(this.options.delimiter)||13==e)){t.preventDefault();return i.split(this.options.delimiter).forEach((t=>{""!=(t=t.replace(this.options.delimiter,""))&&this.add(t)})),i="",this.input.value="",this._closeDropdown(),!1}}_onOriginalInputChange(t){(!t.detail||i(t.detail)&&t.detail!==this.constructor.name)&&(this.value=t.currentTarget.value)}_onTagClick(t){if(t.preventDefault(),t.currentTarget.classList.contains("delete"))return!1;if(null!==this.container.getAttribute("disabled")||this.container.classList.contains("is-disabled"))return!1;if(this.input.focus(),this.options.selectable){const e=t.currentTarget.closest(".tag");if(e){const t=Array.from(this.container.children).indexOf(e);t===this._selected?this.clearSelection():this.selectAtIndex(t)}}}_onTagDeleteClick(t){if(t.preventDefault(),null!==this.container.getAttribute("disabled")||this.container.classList.contains("is-disabled"))return!1;const e=t.currentTarget.closest(".tag");e&&this.removeAtIndex(Array.from(this.container.children).indexOf(e))}}export{c as default};
//# sourceMappingURL=/sm/7182fa9d71722c64a89a2527c1fbb28f9ea232204e49831a4f93a7fe2838a7c4.map